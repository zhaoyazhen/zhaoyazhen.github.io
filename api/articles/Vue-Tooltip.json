{"title":"解决 ElementUI 中 Tooltip 提示框在弹框关闭后再次出现的问题","uid":"1ae5de25b27a74f0875b912f0f30613f","slug":"Vue-Tooltip","date":"2025-08-25T05:43:14.000Z","updated":"2025-08-25T07:03:16.741Z","comments":true,"path":"api/articles/Vue-Tooltip.json","keywords":"React、Vue、Uniapp、Nodejs、性能与优化","cover":"./../images/cover.png","content":"<p>在 Vue2 + Element UI 搭建项目时发现 Tooltip 有个问题，就是当有模态确认框的时候，关闭模态框后 Tooltip 提示内容会再次出现，经过一系列的排查加查资料，发现是由于 Tooltip 会默认给 dom元素一个 tabindex 属性，当弹框结束后，tabindex会自动选中，导致再次出现的问题，如下图：</p>\n  <img src=\"/post/Vue-Tooltip/Vue-Tooltip-1.png\" class=\"\">\n<p>我们可以通过指令方式把 tabindex 给删除掉，步骤如下：</p>\n<p><strong>1、创建clearTabIndex.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> vueClearIndex = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 解决tooltips，在弹框之后再次出现的问题，原因是由于tabindex导致</span></span><br><span class=\"line\">vueClearIndex.<span class=\"property\">install</span> = <span class=\"function\"><span class=\"params\">Vue</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title class_\">Vue</span>.<span class=\"title function_\">directive</span>(<span class=\"string\">&#x27;delTabIndex&#x27;</span>, &#123;</span><br><span class=\"line\">    <span class=\"title function_\">bind</span>(<span class=\"params\">el, binding</span>) &#123; <span class=\"comment\">// el为绑定的元素，binding为绑定给指令的对象</span></span><br><span class=\"line\">      el.<span class=\"property\">__vueSetTimeoutIndex__</span> = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 清除当前tabIndex</span></span><br><span class=\"line\">        el.<span class=\"title function_\">removeAttribute</span>(<span class=\"string\">&#x27;tabindex&#x27;</span>)</span><br><span class=\"line\">        <span class=\"built_in\">clearTimeout</span>(el.<span class=\"property\">__vueSetTimeoutIndex__</span>)</span><br><span class=\"line\">      &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">unbind</span>(<span class=\"params\">el</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(el.<span class=\"property\">__vueSetTimeoutIndex__</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> vueClearIndex</span><br></pre></td></tr></table></figure>\n<p><strong>2、main.js 添加全局指令</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> clearTabIndex <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@/assets/js/clearTabIndex.js&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">clearTabIndex.<span class=\"title function_\">install</span>(<span class=\"title class_\">Vue</span>)</span><br></pre></td></tr></table></figure>\n<p><strong>3、在需要清除 tabIndex 的元素上添加 v-delTabIndex 指令</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;el-tooltip </span><br><span class=\"line\">      v-delTabIndex </span><br><span class=\"line\">      effect=&quot;dark&quot; </span><br><span class=\"line\">      content=&quot;编辑&quot; </span><br><span class=\"line\">      placement=&quot;bottom&quot;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;i </span><br><span class=\"line\">        class=&quot;iconfont icon-xiugai2x main-icon&quot; </span><br><span class=\"line\">        @click=&quot;handleAddOrEdit(&#x27;edit&#x27;, scope.row)&quot;</span><br><span class=\"line\">      &gt;&lt;/i&gt;</span><br><span class=\"line\">    &lt;/el-tooltip&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n","text":"在 Vue2 + Element UI 搭建项目时发现 Tooltip 有个问题，就是当有模态确认框的时候，关闭模态框后 Tooltip 提示内容会再次出现，经...","permalink":"/post/Vue-Tooltip","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"Vue","slug":"Vue","count":2,"path":"api/categories/Vue.json"}],"tags":[{"name":"Vue2","slug":"Vue2","count":2,"path":"api/tags/Vue2.json"},{"name":"Element UI","slug":"Element-UI","count":1,"path":"api/tags/Element-UI.json"},{"name":"Tooltip","slug":"Tooltip","count":1,"path":"api/tags/Tooltip.json"}],"toc":"","author":{"name":"YaZhen","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"喜欢深耕知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"禁用 input(type=number) 框的上下滚动及滚轮事件","uid":"1302b510d278821ad2fdd4a69ba7bb8a","slug":"html-input禁用上下滚动及滚轮","date":"2025-08-25T08:26:21.000Z","updated":"2025-11-11T12:39:10.841Z","comments":true,"path":"api/articles/html-input禁用上下滚动及滚轮.json","keywords":"React、Vue、Uniapp、Nodejs、性能与优化","cover":"./../images/cover.png","text":"一、原生html标签 1、去掉input 在type=“number” 时的上下箭头 12345678<style> input::-webkit-outer-...","permalink":"/post/html-input禁用上下滚动及滚轮","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"html","slug":"html","count":2,"path":"api/categories/html.json"}],"tags":[{"name":"input","slug":"input","count":1,"path":"api/tags/input.json"}],"author":{"name":"YaZhen","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"喜欢深耕知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"高德地图使用时的问题记录","uid":"b04b7dc3b09321e3eaf7dd0c1b8673c3","slug":"AMap-问题记录","date":"2025-08-25T04:58:35.000Z","updated":"2025-11-11T12:57:34.464Z","comments":true,"path":"api/articles/AMap-问题记录.json","keywords":"React、Vue、Uniapp、Nodejs、性能与优化","cover":"./../images/cover.png","text":"本人所在公司是一个专注于大数据可视化的公司，日常开发过程中经常使用高德地图进行各类数据的展示（使用示例demo），也经常遇到一些问题，记录如下： 一、报错信息：...","permalink":"/post/AMap-问题记录","photos":[],"count_time":{"symbolsCount":205,"symbolsTime":"1 mins."},"categories":[{"name":"AMap","slug":"AMap","count":1,"path":"api/categories/AMap.json"}],"tags":[{"name":"高德地图","slug":"高德地图","count":1,"path":"api/tags/高德地图.json"},{"name":"Vue2","slug":"Vue2","count":2,"path":"api/tags/Vue2.json"}],"author":{"name":"YaZhen","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"喜欢深耕知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}